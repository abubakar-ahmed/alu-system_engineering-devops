#!/usr/bin/env bash
# bash script to install nginx web server & make the following configurations:

apt-get update
apt-get install -y nginx

# Configure Nginx to serve content with "Holberton School" at the root
echo 'server {
    listen 80 default_server;
    listen [::]:80 default_server;

    root /var/www/html;
    index index.html index.htm index.nginx-debian.html;

    location / {
        return 200 "Holberton School for the win!\n";
    }
}' > /etc/nginx/sites-available/default

# Start Nginx (no systemctl usage)
/usr/sbin/nginx

# Redirect Nginx logs to /var/log/nginx/error.log
ln -sf /dev/stdout /var/log/nginx/error.log

# Ensure Nginx is listening on port 80
netstat -tnl | grep ':80 ' | grep -q 'LISTEN'
if [ $? -eq 0 ]; then
    echo "Nginx is listening on port 80"
else
    echo "Nginx is not listening on port 80"
fi

exit 0
